/* เลย์เอาต์ส่วนหัว */
.header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 0;
}
.brand { font-weight: 900; font-size: 22px; letter-spacing: .5px; }
.brand .dot { color: var(--accent); }

/* กล่องเมนูหลัก */
.menu-grid {
  display: grid; gap: 16px;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}
.menu-card button { width: 100%; }

/* กล่องเลือกระดับความยาก */
.diff-grid {
  display: grid; gap: 12px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.diff-card { display: grid; gap: 8px; }
.diff-card .meta { color: var(--muted); font-size: 14px; }

/* HUD เบื้องต้น */
.hud {
  position: fixed; inset: 0 0 auto 0;
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 16px; pointer-events: none;
}
.hud .left, .hud .right { display: flex; align-items: center; gap: 8px; pointer-events: auto; }
.tag { padding: 6px 10px; border-radius: 999px; background: var(--surface); border: 1px solid var(--surface-border); font-size: 14px; }

/* แผง Settings (Modal) */
.modal {
  position: fixed; inset: 0; display: none; place-items: center;
  background: color-mix(in oklab, var(--bg), rgba(0,0,0,.5) 40%);
  z-index: 50;
}
.modal.open { display: grid; animation: fadeIn .18s ease; }
.modal .sheet {
  width: min(560px, 92vw);
  background: var(--surface);
  border: 1px solid var(--surface-border);
  border-radius: 18px;
  box-shadow: var(--shadow-2);
  padding: 18px;
}
.modal .sheet .row { justify-content: space-between; }

/* Loading Curtain */
.curtain {
  position: fixed; inset: 0;
  background: var(--bg);
  display: none; place-items: center; z-index: 60;
}
.curtain.open { display: grid; animation: fadeIn .12s ease; }
.spinner {
  width: 40px; height: 40px; border-radius: 50%;
  border: 4px solid var(--surface-border);
  border-top-color: var(--accent);
  animation: spin 1s linear infinite;
}/* ...คงของเดิมไว้... */

.hud {
  position: fixed; inset: 0 0 auto 0;
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 16px; pointer-events: none;
}
.hud .left, .hud .right, .hud .center {
  display: flex; align-items: center; gap: 8px; pointer-events: auto;
}
.hud .center {
  position: absolute; left: 50%; transform: translateX(-50%);
}

/* ปุ่มสถานะความเร็ว */
button.active {
  box-shadow: inset 0 0 0 2px var(--accent);
}

/* พื้นที่ canvas การ์ดเกม */
.canvas-wrap {
  height: 60vh;
  min-height: 360px;
  border: 1px solid var(--surface-border);
  border-radius: 14px;
  overflow: hidden;
}

/* ปุ่มเริ่มเวฟให้เด่น */
.btn-start-wave {
  font-weight: 700;
}/* ...ของเดิมคงไว้... */

/* Towerbar (drawer ขวา) */
.towerbar {
  position: fixed; top: 50%; right: 0; transform: translateY(-50%);
  z-index: 30; display: grid; gap: 8px; justify-items: end;
  pointer-events: none;
}
.towerbar-toggle {
  pointer-events: auto;
  border-top-right-radius: 0; border-bottom-right-radius: 0;
}
.towerbar-panel {
  width: min(320px, 92vw);
  pointer-events: auto;
  transform: translateX(105%);
  transition: transform .18s ease;
}
.towerbar.open .towerbar-panel { transform: translateX(0); }

.tb-grid { display: grid; gap: 8px; }
.tb-item {
  display: grid; gap: 6px; text-align: left;
  padding: 10px 12px; border-radius: 12px;
  background: var(--btn-bg); border: 1px solid var(--surface-border);
}
.tb-item[disabled] { opacity: .55; cursor: not-allowed; }
.tb-row1 { display: flex; justify-content: space-between; align-items: baseline; }
.tb-row2 { font-size: 12px; }

/* ปุ่มวาง/ยกเลิก ลอยด้านล่างซ้ายของแคนวาส */
.place-controls {
  position: absolute; left: 12px; bottom: 12px; display: none; gap: 8px;
}
.place-controls.show { display: flex; }
/* ...ของเดิมคงไว้... */

.panel-left {
  position: fixed; left: 12px; top: 110px; width: min(320px, 90vw);
  z-index: 25;
}
.panel-head { display:flex; justify-content:space-between; align-items:center; }
.stat { padding: 6px 10px; border: 1px solid var(--surface-border); border-radius: 10px; background: var(--surface); }
.card.mini { padding: 12px; border-radius: 12px; }
.card.mini .muted { font-size: 12px; }

.selected-ring {
  position: absolute; pointer-events: none;
  border: 2px dashed var(--accent);
  border-radius: 999px;
  opacity: .8;
}
.modal {
  position: fixed; inset: 0; display: grid; place-items: center;
  background: rgba(0,0,0,.45); z-index: 1000;
}
.modal-card {
  background: var(--surface); color: var(--text);
  border:1px solid var(--surface-border); border-radius:14px;
  padding:16px; width:min(440px, 92vw);
}